<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Pinned Map</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        @layer base {
            body {
                font-family: 'Inter', sans-serif;
            }
        }
    </style>
    <!-- Leaflet CSS for the map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin="" />
    <!-- Custom style for the map container -->
    <style>
        #map {
            width: 100%;
            height: 80vh; /* Takes up 80% of the viewport height */
            border-radius: 5rem; /* rounded-xl */
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8 flex flex-col items-center min-h-screen">
    <div class="container mx-auto">
        <div class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-2">My Pinned Locations</h1>
            <p class="text-gray-600">Click on a pin to see more details and links.</p>
        </div>

        <!-- Map Container -->
        <div id="map" class="shadow-lg"></div>

    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>

    <script>
        // Use window.onload to ensure the external Leaflet script is fully loaded before our code runs.
        window.onload = () => {
            // -----------------------------------------------------------
            // 1. Initialize the map
            // -----------------------------------------------------------
            const map = L.map('map').setView([25.0943960,55.3729864],8); 
            // Add the OpenStreetMap tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 20,
                attribution: 'Â© OpenStreetMap contributors'
            }).addTo(map);

            // -----------------------------------------------------------
            // 2. Define the locations and their data
            // -----------------------------------------------------------
            const locations = [
                {
                    lat: 25.0943960,
                    lng: 55.3729864,
                    title: "VERDAN1A",
                    description: "",
                    links: [
                        { text: "Visit Flat Show", url: "https://flatshow.property/VERDAN1A4#/" },
                        {text: 'Open brochure', url:"https://drive.google.com/drive/u/0/folders/1KvUzWThbl6Tmv_-s4ePeA_bMviYgZku1?sort=13&direction=a"}
                    ],
                },
            
            ];

            // -----------------------------------------------------------
            // 3. Loop through locations and add markers
            // -----------------------------------------------------------
           locations.forEach(location => {
                // Create a new marker for each location
                const marker = L.marker([location.lat, location.lng]).addTo(map);

                // Build the HTML content for the popup
                let popupContent = `
                    <div class="p-2">
                        <h3 class="text-lg font-bold mb-1">${location.title}</h3>
                        <p class="text-sm text-gray-700 mb-2">${location.description}</p>
                        <ul>
                            ${location.links.map(link => `
                                <li class="mb-1">
                                    <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="text-blue-500 hover:text-blue-700 underline text-sm transition-colors duration-200">
                                        ${link.text}
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                `;

                popupContent += `</div>`;

                // Bind the popup to the marker
                marker.bindPopup(popupContent);

                // Add a listener to the popupopen event to handle the button click
                marker.on('popupopen', (e) => {
                    const popupElement = e.popup.getElement();
                    const showPdfBtn = popupElement.querySelector('#show-pdf-btn');

    
                });
            });
        };
    </script>
</body>
</html>

